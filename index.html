<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Nostalgia Network: How Individual Differences Shape Our Past</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Soft Cognitive -->
    <!-- Application Structure Plan: The application is structured thematically to guide the user from foundational concepts to specific findings, promoting better understanding than a traditional research paper format. It starts with a general introduction, moves to the neural basis of nostalgia ("The Nostalgic Brain") with an interactive diagram, then dives into the core data in "Individual Differences." This central section is highly interactive, allowing users to filter the results by Age, Personality, and Gender, dynamically updating text and visualizations. This user-driven exploration is designed to make complex data accessible and engaging. The final section, "Key Findings," summarizes the main takeaways. This structure was chosen to transform a static report into an interactive learning tool, enabling users to explore the data in a non-linear, self-directed way. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Core Brain Regions -> Goal: Inform/Organize -> Viz: Interactive HTML/CSS Brain Diagram -> Interaction: Click on region to display info -> Justification: More engaging and exploratory than a static labeled diagram. Method: Vanilla JS.
        - Report Info: Age & Reminiscence Bump -> Goal: Show Change -> Viz: Line Chart -> Interaction: Tooltips on hover -> Justification: Standard and effective for showing distribution over a continuous variable (age). Library: Chart.js.
        - Report Info: Personality & Nostalgia -> Goal: Compare/Relate -> Viz: Dynamic Bar Chart -> Interaction: Chart updates when user selects a personality trait -> Justification: Provides clear, immediate visual feedback for comparing correlations. Library: Chart.js.
        - Report Info: Gender & Nostalgic Themes -> Goal: Compare Proportions -> Viz: Side-by-side Donut Charts -> Interaction: Tooltips on hover -> Justification: Excellent for comparing part-to-whole compositions between two groups. Library: Chart.js.
        - All textual content is dynamically updated alongside charts to provide context and interpretation, ensuring a cohesive experience.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #38332E;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
            transition: all 0.3s ease;
        }
        
        .chart-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -2px;
            left: 50%;
            background-color: #A56E0D;
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        .brain-region {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 0.75rem;
            line-height: 1rem;
            font-weight: 600;
            position: absolute;
            border: 2px solid transparent;
        }
        .brain-region.active, .brain-region:hover {
            transform: scale(1.2);
            border-color: #D5A021;
            box-shadow: 0 8px 25px rgba(213, 160, 33, 0.3);
        }
        
        /* Hamburger Menu Styles */
        .hamburger {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            padding: 4px;
            z-index: 60;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: #A56E0D;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background: linear-gradient(135deg, #FDFBF8 0%, #F8F5F0 100%);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 20px rgba(0,0,0,0.1);
            transition: left 0.3s ease;
            z-index: 55;
            overflow-y: auto;
        }
        
        .sidebar.open {
            left: 0;
        }
        
        .sidebar-content {
            padding: 80px 20px 20px;
        }
        
        .sidebar-nav a {
            display: block;
            padding: 12px 20px;
            color: #38332E;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .sidebar-nav a:hover {
            background-color: #A56E0D;
            color: white;
            transform: translateX(5px);
        }
        
        .sidebar-section {
            margin-bottom: 30px;
        }
        
        .sidebar-section h3 {
            font-size: 0.875rem;
            font-weight: 600;
            color: #A56E0D;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 15px;
            padding-left: 20px;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 50;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Animation utilities */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        .slide-up {
            animation: slideUp 0.8s ease-out;
        }
        
        .scale-in {
            animation: scaleIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Scroll animations */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        /* Enhanced button animations */
        .filter-btn, .trait-btn {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn::before, .trait-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .filter-btn:hover::before, .trait-btn:hover::before {
            left: 100%;
        }
        
        .filter-btn:hover, .trait-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Enhanced card animations */
        .enhanced-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .enhanced-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(165, 110, 13, 0.1), rgba(213, 160, 33, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .enhanced-card:hover::before {
            opacity: 1;
        }
        
        .enhanced-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        /* Parallax effect */
        .parallax-section {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        
        /* Smooth scroll progress indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, #A56E0D, #D5A021);
            z-index: 100;
            transition: width 0.1s ease;
        }
        
        /* Scroll animations revealed state */
        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Mobile navigation improvements */
        @media (max-width: 768px) {
            .nav-link {
                display: none;
            }
            
            .hamburger {
                display: flex;
            }
            
            .sidebar {
                width: 280px;
                left: -280px;
            }
            
            .sidebar-nav a {
                padding: 16px 20px;
                font-size: 1.1rem;
            }
        }
        
        @media (min-width: 769px) {
            .hamburger {
                display: flex;
            }
            
            .sidebar {
                width: 300px;
            }
        }
        
        /* Improved responsive typography */
        @media (max-width: 640px) {
            .text-4xl {
                font-size: 2.5rem;
            }
            
            .text-3xl {
                font-size: 2rem;
            }
            
            .text-6xl {
                font-size: 3.5rem;
            }
        }
        
        /* Touch-friendly interactive elements */
        @media (hover: none) and (pointer: coarse) {
            .brain-region {
                padding: 12px;
                min-width: 60px;
                min-height: 60px;
            }
            
            .filter-btn, .trait-btn {
                padding: 14px 20px;
                min-height: 44px;
            }
            
            .enhanced-card {
                transition: none;
            }
            
            .enhanced-card:active {
                transform: scale(0.98);
            }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Scroll Progress Indicator -->
    <div class="scroll-progress" id="scroll-progress"></div>

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <div class="hamburger mr-4" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <h1 class="text-xl font-bold text-[#A56E0D]">The Nostalgia Network</h1>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="#introduction" class="nav-link text-gray-600 hover:text-[#A56E0D]">Introduction</a>
                <a href="#brain" class="nav-link text-gray-600 hover:text-[#A56E0D]">The Nostalgic Brain</a>
                <a href="#differences" class="nav-link text-gray-600 hover:text-[#A56E0D]">Individual Differences</a>
                <a href="#findings" class="nav-link text-gray-600 hover:text-[#A56E0D]">Key Findings</a>
            </div>
        </nav>
    </header>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-section">
                <h3>Navigation</h3>
                <nav class="sidebar-nav">
                    <a href="#introduction">Introduction</a>
                    <a href="#brain">The Nostalgic Brain</a>
                    <a href="#differences">Individual Differences</a>
                    <a href="#findings">Key Findings</a>
                </nav>
            </div>
            <div class="sidebar-section">
                <h3>Pages</h3>
                <nav class="sidebar-nav">
                    <a href="page1.html">Hello World Page 1</a>
                    <a href="page2.html">Hello World Page 2</a>
                </nav>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <main class="container mx-auto px-6 py-12">
        <section id="introduction" class="text-center mb-24 fade-in">
            <h2 class="text-4xl font-bold text-[#A56E0D] mb-4">How Do We Remember the Past?</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-700">
                Nostalgia, the bittersweet emotion of recalling meaningful past events, is a universal human experience. It serves important psychological functions, from improving mood to fostering social connection. This research explores how our unique individual traits—our age, personality, and gender—shape the very way our brains process these cherished memories. This interactive report breaks down the key findings, revealing the diverse neural tapestry of nostalgia.
            </p>
        </section>

        <section id="brain" class="mb-24 slide-up">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-2">The Nostalgic Brain</h2>
                <p class="max-w-3xl mx-auto text-gray-700">
                    When we experience nostalgia, a specific network of brain regions activates, connecting memory, emotion, and self-reflection. This section provides an interactive look at the key players in this neural circuit. Click on each highlighted region to learn about its specific role in processing your nostalgic memories.
                </p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="relative w-full max-w-lg mx-auto aspect-square">
                    <div class="absolute inset-0 bg-no-repeat bg-center bg-contain" style="background-image: url('https://placehold.co/600x600/FDFBF8/38332E?text=Brain+Outline'); opacity: 0.1;"></div>
                    
                    <div id="hippocampus" data-region="hippocampus" class="brain-region bg-orange-200/50 text-orange-800" style="width: 25%; height: 18%; top: 45%; left: 38%;">Hippocampus</div>
                    <div id="amygdala" data-region="amygdala" class="brain-region bg-red-200/50 text-red-800" style="width: 15%; height: 12%; top: 52%; left: 28%;">Amygdala</div>
                    <div id="pfc" data-region="pfc" class="brain-region bg-blue-200/50 text-blue-800" style="width: 35%; height: 25%; top: 15%; left: 55%;">Prefrontal Cortex</div>
                    <div id="reward" data-region="reward" class="brain-region bg-green-200/50 text-green-800" style="width: 20%; height: 15%; top: 60%; left: 55%;">Reward Circuit</div>
                </div>
                <div id="brain-info-panel" class="bg-white p-6 rounded-lg shadow-lg min-h-[250px] flex items-center justify-center">
                    <p id="brain-info-text" class="text-gray-600 text-center">Click a brain region to see its function.</p>
                </div>
            </div>
        </section>

        <section id="differences" class="mb-24 scale-in">
            <div class="text-center mb-12">
                 <h2 class="text-3xl font-bold mb-2">Individual Differences in Nostalgia</h2>
                 <p class="max-w-3xl mx-auto text-gray-700">While the core neural network for nostalgia is consistent, its activation patterns and the nature of the experience differ significantly from person to person. This section allows you to explore how age, personality, and gender influence our connection to the past. Select a category to see how the data changes.</p>
            </div>
            <div class="flex justify-center space-x-2 md:space-x-4 mb-8 bg-amber-100/50 p-2 rounded-full max-w-md mx-auto">
                <button id="btn-age" class="filter-btn active flex-1 px-4 py-2 rounded-full transition">Age</button>
                <button id="btn-personality" class="filter-btn flex-1 px-4 py-2 rounded-full transition">Personality</button>
                <button id="btn-gender" class="filter-btn flex-1 px-4 py-2 rounded-full transition">Gender</button>
            </div>

            <div id="content-age" class="filter-content">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="order-2 md:order-1">
                        <h3 class="text-2xl font-semibold mb-4 text-[#A56E0D]">The Reminiscence Bump</h3>
                        <p class="text-gray-700">
                            Across the lifespan, memories are not recalled equally. We tend to remember a disproportionate number of events from our adolescence and early adulthood (roughly ages 10-30). This phenomenon, known as the "reminiscence bump," is often the source of our most potent nostalgic memories, as it's a period of identity formation and significant life firsts. Older adults show heightened hippocampal activity when recalling these memories, suggesting a deeper, more consolidated encoding of these formative experiences.
                        </p>
                    </div>
                     <div class="order-1 md:order-2 chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="content-personality" class="filter-content hidden">
                 <div class="text-center mb-8">
                     <p class="text-gray-700 mb-4">The Big Five personality traits influence the emotional flavor of our nostalgia. Select a trait to see its correlation with nostalgia-related brain activity.</p>
                     <div class="flex flex-wrap justify-center gap-2">
                        <button class="trait-btn active px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm" data-trait="openness">Openness</button>
                        <button class="trait-btn px-4 py-2 bg-gray-100 text-gray-800 rounded-full text-sm" data-trait="conscientiousness">Conscientiousness</button>
                        <button class="trait-btn px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm" data-trait="extraversion">Extraversion</button>
                        <button class="trait-btn px-4 py-2 bg-amber-100 text-amber-800 rounded-full text-sm" data-trait="agreeableness">Agreeableness</button>
                        <button class="trait-btn px-4 py-2 bg-red-100 text-red-800 rounded-full text-sm" data-trait="neuroticism">Neuroticism</button>
                     </div>
                 </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="order-2 md:order-1">
                        <h3 id="personality-title" class="text-2xl font-semibold mb-4 text-[#A56E0D]"></h3>
                        <p id="personality-text" class="text-gray-700"></p>
                    </div>
                    <div class="order-1 md:order-2 chart-container">
                        <canvas id="personalityChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="content-gender" class="filter-content hidden">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-semibold mb-2 text-[#A56E0D]">Thematic Content of Nostalgic Memories</h3>
                    <p class="text-gray-700 max-w-2xl mx-auto">While the intensity of nostalgia is similar across genders, research suggests subtle differences in the content. Men's nostalgic memories more often center on agentic themes (personal achievements, overcoming challenges), while women's memories tend to focus more on relational themes (social bonds, family moments).</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="chart-container">
                        <h4 class="text-center font-semibold mb-2">Female Participants</h4>
                        <canvas id="genderChartFemale"></canvas>
                    </div>
                    <div class="chart-container">
                         <h4 class="text-center font-semibold mb-2">Male Participants</h4>
                        <canvas id="genderChartMale"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="findings" class="bg-amber-50/50 rounded-lg p-8 md:p-12 fade-in">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">Key Findings & Conclusion</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="enhanced-card bg-white p-6 rounded-lg shadow">
                    <h3 class="font-semibold text-lg text-[#A56E0D] mb-2">Brain Network is Universal</h3>
                    <p class="text-sm text-gray-600">The core network for nostalgia—linking memory, emotion, and reward circuits—is largely consistent across all individuals.</p>
                </div>
                <div class="enhanced-card bg-white p-6 rounded-lg shadow">
                    <h3 class="font-semibold text-lg text-[#A56E0D] mb-2">Personality Colors the Past</h3>
                    <p class="text-sm text-gray-600">Traits like neuroticism are linked to more bittersweet nostalgia with higher amygdala (emotion) activity, while extraversion correlates with positive social memories and stronger reward circuit activation.</p>
                </div>
                <div class="enhanced-card bg-white p-6 rounded-lg shadow">
                     <h3 class="font-semibold text-lg text-[#A56E0D] mb-2">Life Stage Matters</h3>
                    <p class="text-sm text-gray-600">Age significantly impacts nostalgia, with memories from the "reminiscence bump" (ages 10-30) being particularly vivid and neurally pronounced, especially in older adults.</p>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p class="max-w-3xl mx-auto text-gray-700">In conclusion, while we all experience nostalgia, the way we do so is as unique as our own life stories. These individual differences create a rich and varied internal landscape of memory, demonstrating that our past is not a static record but a dynamic, personal experience constantly being reshaped by who we are today.</p>
            </div>
        </section>

    </main>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Hamburger menu functionality
    const hamburger = document.getElementById('hamburger');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');

    function toggleSidebar() {
        hamburger.classList.toggle('active');
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
        document.body.style.overflow = sidebar.classList.contains('open') ? 'hidden' : '';
    }

    hamburger.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', toggleSidebar);

    // Close sidebar when clicking on navigation links
    const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
    sidebarLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (link.getAttribute('href').startsWith('#')) {
                toggleSidebar();
            }
        });
    });

    // Close sidebar on escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && sidebar.classList.contains('open')) {
            toggleSidebar();
        }
    });

    // Handle window resize
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768 && sidebar.classList.contains('open')) {
            // Don't auto-close on larger screens, keep hamburger menu functional
        }
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                const headerOffset = 80;
                const elementPosition = target.offsetTop;
                const offsetPosition = elementPosition - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Scroll progress indicator
    const scrollProgress = document.getElementById('scroll-progress');
    function updateScrollProgress() {
        const scrollTop = window.pageYOffset;
        const docHeight = document.body.offsetHeight - window.innerHeight;
        const scrollPercent = (scrollTop / docHeight) * 100;
        scrollProgress.style.width = scrollPercent + '%';
    }

    window.addEventListener('scroll', updateScrollProgress);

    // Enhanced scroll animations with stagger effect
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('revealed');
                
                // Add stagger effect to child elements
                const childElements = entry.target.querySelectorAll('.enhanced-card, .brain-region, .chart-container');
                childElements.forEach((child, index) => {
                    setTimeout(() => {
                        child.style.opacity = '1';
                        child.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            }
        });
    }, observerOptions);

    // Add scroll reveal to sections
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        section.classList.add('scroll-reveal');
        observer.observe(section);
    });

    // Initialize child elements for stagger animation
    const enhancedCards = document.querySelectorAll('.enhanced-card');
    enhancedCards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
    });

    const data = {
        brain: {
            hippocampus: {
                title: "Hippocampus: The Memory Index",
                text: "Crucial for forming, organizing, and retrieving autobiographical memories. During nostalgia, it's highly active, working to reconstruct the 'what, where, and when' of a past event."
            },
            amygdala: {
                title: "Amygdala: The Emotional Core",
                text: "This region processes emotions. Its activation during nostalgia attaches emotional significance—joy, comfort, or a touch of sadness—to the retrieved memory."
            },
            pfc: {
                title: "Prefrontal Cortex: The Evaluator",
                text: "The brain's executive control center helps place the memory in the context of our life story, evaluating its meaning and integrating it with our sense of self."
            },
            reward: {
                title: "Reward Circuit (Ventral Striatum)",
                text: "Associated with pleasure and reward. Its activation explains the warm, comforting, and positive feelings often produced by nostalgia, reinforcing the behavior of reminiscence."
            }
        },
        personality: {
            openness: {
                title: "Openness to Experience",
                text: "Individuals high in openness tend to experience nostalgia more frequently. Their imaginative and curious nature may lead them to engage more deeply with past memories, showing balanced activation across the nostalgia network.",
                correlations: { 'Hippocampus': 0.3, 'Amygdala': 0.2, 'PFC': 0.4, 'Reward': 0.35 }
            },
            conscientiousness: {
                title: "Conscientiousness",
                text: "This trait shows a weaker link to nostalgia. Conscientious individuals might recall memories related to personal goals and achievements, with slightly higher PFC activation related to structured self-reflection.",
                 correlations: { 'Hippocampus': 0.1, 'Amygdala': 0.05, 'PFC': 0.2, 'Reward': 0.1 }
            },
            extraversion: {
                title: "Extraversion",
                text: "Strongly correlated with positive, social nostalgia. Extraverts show significantly higher activation in the reward circuits, reflecting the pleasurable feeling they derive from recalling social gatherings and relationships.",
                 correlations: { 'Hippocampus': 0.4, 'Amygdala': 0.25, 'PFC': 0.3, 'Reward': 0.6 }
            },
            agreeableness: {
                title: "Agreeableness",
                text: "Agreeable individuals often recall prosocial memories focused on connection and harmony. Their brain activation patterns reflect a positive emotional tone, similar to extraverts but with a focus on relational contentment.",
                 correlations: { 'Hippocampus': 0.35, 'Amygdala': 0.15, 'PFC': 0.25, 'Reward': 0.4 }
            },
            neuroticism: {
                title: "Neuroticism",
                text: "Associated with a more bittersweet or even negative form of nostalgia. Individuals high in neuroticism show heightened co-activation of the amygdala (emotion) and hippocampus, suggesting that their memories are more emotionally intense and sometimes tinged with anxiety or regret.",
                 correlations: { 'Hippocampus': 0.5, 'Amygdala': 0.7, 'PFC': 0.3, 'Reward': 0.15 }
            }
        }
    };

    let ageChart, personalityChart, genderChartFemale, genderChartMale;

    const brainRegions = document.querySelectorAll('.brain-region');
    const brainInfoPanel = document.getElementById('brain-info-panel');
    const brainInfoText = document.getElementById('brain-info-text');

    brainRegions.forEach(region => {
        region.addEventListener('click', () => {
            brainRegions.forEach(r => r.classList.remove('active'));
            region.classList.add('active');
            const regionKey = region.dataset.region;
            const regionData = data.brain[regionKey];
            brainInfoPanel.innerHTML = `<div class="p-4"><h4 class="font-bold text-lg text-center mb-2 text-[#A56E0D]">${regionData.title}</h4><p class="text-gray-700 text-sm text-center">${regionData.text}</p></div>`;
        });
    });

    const filterBtns = document.querySelectorAll('.filter-btn');
    const filterContents = document.querySelectorAll('.filter-content');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active', 'bg-[#A56E0D]', 'text-white'));
            btn.classList.add('active', 'bg-[#A56E0D]', 'text-white');
            
            const contentId = `content-${btn.id.split('-')[1]}`;
            filterContents.forEach(content => {
                if (content.id === contentId) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        });
    });
    
    function setInitialActiveButtonStyles() {
        const activeBtn = document.querySelector('.filter-btn.active');
        if (activeBtn) {
            activeBtn.classList.add('bg-[#A56E0D]', 'text-white');
        }
    }

    function createAgeChart() {
        const ctx = document.getElementById('ageChart').getContext('2d');
        if (ageChart) ageChart.destroy();
        ageChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['0-10', '10-20', '20-30', '30-40', '40-50', '50-60', '60-70'],
                datasets: [{
                    label: 'Memory Recall Frequency',
                    data: [15, 45, 40, 20, 25, 30, 35],
                    borderColor: '#D5A021',
                    backgroundColor: 'rgba(213, 160, 33, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: (context) => `Age Range: ${context[0].label} yrs`
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Relative Recall Count' }
                    }
                }
            }
        });
    }
    
    const personalityTraitBtns = document.querySelectorAll('.trait-btn');
    const personalityTitle = document.getElementById('personality-title');
    const personalityText = document.getElementById('personality-text');

    function updatePersonalityContent(traitKey) {
        const traitData = data.personality[traitKey];
        personalityTitle.textContent = traitData.title;
        personalityText.textContent = traitData.text;

        personalityTraitBtns.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.trait === traitKey) {
                btn.classList.add('active');
            }
        });
        createPersonalityChart(traitKey);
    }
    
    personalityTraitBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            updatePersonalityContent(btn.dataset.trait);
        });
    });

    function createPersonalityChart(traitKey) {
        const ctx = document.getElementById('personalityChart').getContext('2d');
        const correlations = data.personality[traitKey].correlations;
        if (personalityChart) personalityChart.destroy();
        personalityChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: Object.keys(correlations),
                datasets: [{
                    label: 'Correlation with Brain Activity',
                    data: Object.values(correlations),
                    backgroundColor: [
                        'rgba(251, 146, 60, 0.6)', 
                        'rgba(239, 68, 68, 0.6)', 
                        'rgba(59, 130, 246, 0.6)', 
                        'rgba(34, 197, 94, 0.6)'
                    ],
                    borderColor: [
                        'rgba(251, 146, 60, 1)', 
                        'rgba(239, 68, 68, 1)', 
                        'rgba(59, 130, 246, 1)', 
                        'rgba(34, 197, 94, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                     title: { display: true, text: `Correlation for ${data.personality[traitKey].title}` }
                },
                 scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: 'Correlation Coefficient' }
                    }
                }
            }
        });
    }

    function createGenderCharts() {
        const femaleCtx = document.getElementById('genderChartFemale').getContext('2d');
        const maleCtx = document.getElementById('genderChartMale').getContext('2d');

        const options = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom' },
                tooltip: {
                    callbacks: {
                        label: function (context) {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed !== null) {
                                label += context.parsed + '%';
                            }
                            return label;
                        }
                    }
                }
            }
        };

        if(genderChartFemale) genderChartFemale.destroy();
        genderChartFemale = new Chart(femaleCtx, {
            type: 'doughnut',
            data: {
                labels: ['Relational Themes', 'Agentic Themes'],
                datasets: [{
                    data: [72, 28],
                    backgroundColor: ['#D97706', '#6B7280'],
                    hoverOffset: 4
                }]
            },
            options: options
        });
        
        if(genderChartMale) genderChartMale.destroy();
        genderChartMale = new Chart(maleCtx, {
            type: 'doughnut',
            data: {
                labels: ['Relational Themes', 'Agentic Themes'],
                datasets: [{
                    data: [45, 55],
                    backgroundColor: ['#D97706', '#6B7280'],
                    hoverOffset: 4
                }]
            },
            options: options
        });
    }

    function init() {
        setInitialActiveButtonStyles();
        createAgeChart();
        updatePersonalityContent('openness');
        createGenderCharts();
    }

    init();
});
</script>

</body>
</html>
